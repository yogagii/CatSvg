<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div class="svg-wrap">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3000px" height="3000px">
				<path fill-rule="evenodd" fill="rgb(247, 235, 218)" d="M8.000,0.000 L3008.000,0.000 L3008.000,3000.000 L8.000,3000.000 L8.000,0.000 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1715.000,2219.000 C1714.295,2185.481 1731.366,2135.111 1737.000,2135.000 C1742.819,2134.885 1746.372,2156.831 1749.000,2165.000 C1752.015,2174.373 1755.331,2193.275 1760.000,2193.000 C1762.947,2192.826 1762.338,2163.236 1766.000,2146.000 C1769.662,2128.763 1789.908,2076.785 1795.000,2080.000 C1800.092,2083.215 1794.040,2125.449 1796.000,2143.000 C1797.960,2160.550 1802.277,2212.555 1807.000,2213.000 C1814.373,2213.695 1815.935,2204.252 1821.000,2195.000 C1826.064,2185.748 1833.738,2176.361 1839.000,2177.000 C1857.240,2179.214 1853.679,2209.198 1855.000,2221.000 C1863.047,2292.916 1854.544,2283.987 1923.000,2318.000 C1936.821,2324.867 2116.773,2388.924 2230.963,2419.324 C2377.714,2458.393 2656.223,2520.768 2717.000,2527.000 C2986.216,2554.604 2920.991,2971.901 3007.000,2995.000 C3093.009,3018.099 3130.135,3112.117 3040.000,3112.000 C2949.865,3111.883 2597.908,3105.247 2478.000,3105.000 C2358.091,3104.753 2392.428,3041.876 2361.000,2999.000 C2329.572,2956.124 2278.585,2889.960 2173.000,2832.000 C2067.415,2774.040 2003.027,2742.461 1928.000,2679.000 C1852.972,2615.539 1787.620,2511.422 1762.000,2437.000 C1736.380,2362.578 1716.347,2283.042 1715.000,2219.000 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1123.000,2117.000 C1130.624,2082.077 1139.085,2049.621 1145.000,2050.000 C1153.304,2050.532 1146.031,2080.100 1147.000,2114.000 C1147.300,2124.494 1148.426,2157.624 1152.000,2179.000 C1155.574,2200.376 1161.636,2223.688 1167.000,2224.000 C1172.364,2224.312 1173.355,2217.450 1174.000,2213.000 C1174.645,2208.549 1176.203,2196.832 1180.000,2197.000 C1185.929,2197.262 1191.664,2223.387 1192.000,2233.000 C1193.968,2289.253 1167.193,2369.044 1153.000,2411.000 C1099.156,2570.169 1042.300,2633.443 970.438,2709.969 C920.959,2762.659 782.815,2857.080 723.000,2904.000 C659.178,2954.063 643.906,3022.398 641.000,3029.000 C638.094,3035.602 34.216,3085.516 2.000,3040.000 C-8.039,3025.816 36.629,2680.777 173.556,2586.128 C304.953,2495.302 338.850,2521.320 561.000,2471.000 C715.937,2435.904 910.754,2342.669 955.000,2324.000 C1006.107,2302.436 1042.649,2290.811 1064.000,2228.000 C1066.916,2219.420 1072.746,2206.985 1076.000,2193.000 C1080.697,2172.817 1082.426,2151.302 1084.688,2150.128 C1090.044,2147.347 1092.262,2161.167 1096.000,2170.000 C1104.448,2189.965 1105.469,2192.230 1108.000,2192.000 C1112.450,2191.595 1115.375,2151.923 1123.000,2117.000 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M943.000,2120.000 C949.588,2139.792 975.827,2182.322 987.000,2196.000 C998.173,2209.678 1029.455,2229.089 1047.127,2240.154 C1064.799,2251.218 808.431,2249.225 770.187,2248.128 C731.943,2247.031 726.971,2231.267 735.672,2210.252 C744.373,2189.237 778.598,2172.603 819.494,2152.443 C860.389,2132.282 936.412,2100.208 943.000,2120.000 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M2024.000,2119.000 C2017.516,2138.792 1993.997,2176.322 1983.000,2190.000 C1972.003,2203.678 1942.252,2225.089 1924.859,2236.154 C1907.467,2247.218 2159.779,2245.225 2197.417,2244.128 C2235.056,2243.031 2239.949,2227.267 2231.386,2206.252 C2222.822,2185.237 2189.139,2168.603 2148.891,2148.443 C2108.642,2128.282 2030.484,2099.208 2024.000,2119.000 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M2295.442,2188.545 C2298.837,2182.925 2341.192,2193.553 2375.580,2198.499 C2396.341,2201.485 2432.278,2202.900 2488.193,2201.887 C2537.112,2201.000 2560.593,2187.903 2584.892,2209.623 C2595.466,2231.305 2570.733,2278.214 2549.823,2281.024 C2528.913,2283.833 2498.236,2270.381 2450.211,2255.816 C2402.187,2241.252 2383.877,2234.903 2353.608,2221.635 C2329.669,2211.142 2291.031,2195.844 2295.442,2188.545 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M2401.008,2115.349 C2405.003,2106.865 2452.642,2117.318 2486.303,2119.321 C2505.284,2120.450 2528.836,2122.359 2593.085,2121.567 C2641.934,2120.964 2701.611,2100.436 2723.236,2129.918 C2731.273,2160.558 2663.572,2221.613 2642.548,2227.550 C2621.524,2233.488 2619.637,2225.254 2573.746,2208.177 C2528.215,2191.234 2502.020,2176.455 2469.437,2159.093 C2446.467,2146.852 2395.821,2126.367 2401.008,2115.349 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M2530.361,2083.559 C2530.837,2076.621 2563.208,2062.240 2579.587,2053.117 C2596.794,2043.532 2642.013,2015.199 2668.209,1990.607 C2694.795,1965.647 2758.342,1907.152 2785.686,1865.486 C2813.067,1823.761 2837.767,1787.552 2854.540,1793.285 C2878.608,1801.511 2831.763,1979.294 2816.818,2002.373 C2801.873,2025.453 2737.042,2046.754 2715.504,2055.110 C2693.966,2063.467 2621.560,2085.674 2598.125,2087.521 C2573.666,2089.448 2529.709,2093.070 2530.361,2083.559 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M2661.804,1938.437 C2655.227,1930.895 2666.168,1901.494 2664.530,1880.830 C2662.893,1860.167 2669.494,1807.030 2654.515,1741.311 C2639.537,1675.593 2606.269,1599.397 2575.860,1547.976 C2545.451,1496.555 2499.420,1440.076 2533.025,1436.328 C2566.631,1432.579 2734.219,1595.738 2749.579,1632.501 C2763.583,1666.019 2764.057,1702.880 2748.885,1744.108 C2733.713,1785.337 2713.061,1842.629 2703.523,1864.044 C2693.984,1885.459 2669.955,1947.784 2661.804,1938.437 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1877.256,1938.206 C1918.711,1904.985 1965.708,1862.529 1993.413,1839.263 C2011.697,1823.906 2057.976,1830.717 2080.473,1859.273 C2098.238,1881.821 2078.687,1911.769 2051.096,1933.556 C2001.974,1972.346 1995.205,1977.850 1964.150,1992.780 C1943.411,2002.750 1911.161,2011.474 1849.819,2003.855 C1841.565,2002.829 1811.742,1996.084 1810.155,1995.119 C1807.717,1993.635 1807.009,1987.052 1807.611,1984.689 C1809.235,1978.310 1835.272,1971.851 1877.256,1938.206 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1857.688,1826.738 C1884.774,1795.443 1920.059,1742.284 1932.773,1726.486 C1944.439,1711.991 1966.033,1675.255 2009.657,1709.359 C2027.302,1723.154 2020.753,1753.689 2006.837,1770.215 C1976.097,1806.722 1955.529,1824.268 1932.415,1837.940 C1915.660,1847.851 1897.350,1854.131 1862.957,1863.427 C1849.924,1866.950 1837.158,1870.222 1834.790,1870.056 C1832.569,1869.900 1828.720,1865.916 1827.684,1861.625 C1826.514,1856.777 1834.264,1853.801 1857.688,1826.738 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1861.236,1707.425 C1877.261,1675.980 1895.608,1624.750 1902.904,1609.071 C1909.598,1594.685 1919.969,1559.852 1963.021,1579.213 C1980.435,1587.045 1981.246,1613.675 1973.105,1630.202 C1955.121,1666.710 1941.683,1685.438 1925.349,1701.475 C1913.508,1713.100 1899.640,1722.034 1873.082,1736.745 C1863.018,1742.320 1853.123,1747.632 1851.130,1747.977 C1849.260,1748.301 1845.263,1745.785 1843.530,1742.441 C1841.573,1738.664 1847.378,1734.619 1861.236,1707.425 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1045.085,1795.420 C1017.446,1760.565 981.711,1702.946 968.832,1685.356 C957.015,1669.218 930.281,1665.845 905.745,1683.849 C886.371,1698.066 889.099,1723.087 909.968,1743.861 C946.301,1780.027 962.679,1795.769 984.282,1814.860 C998.710,1827.611 1016.720,1846.026 1058.597,1852.896 C1065.452,1854.021 1091.727,1855.008 1093.221,1854.586 C1095.517,1853.938 1096.465,1850.712 1096.598,1848.670 C1096.962,1843.106 1072.706,1830.252 1045.085,1795.420 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1062.840,1694.419 C1045.743,1659.459 1026.000,1603.534 1018.286,1586.093 C1011.209,1570.090 988.963,1562.189 964.576,1572.960 C945.319,1581.465 942.946,1603.348 956.898,1625.010 C981.190,1662.723 992.246,1679.243 1007.143,1699.607 C1017.092,1713.206 1029.041,1732.317 1063.590,1746.048 C1069.246,1748.296 1091.548,1754.073 1092.906,1753.993 C1094.993,1753.870 1096.412,1751.293 1096.910,1749.574 C1098.268,1744.890 1079.926,1729.356 1062.840,1694.419 Z" />
				<path fill-rule="evenodd" fill="rgb(136, 102, 98)" d="M1040.018,1950.098 C1003.644,1914.820 967.353,1850.002 950.503,1831.765 C935.043,1815.033 891.147,1813.906 865.709,1837.461 C845.621,1856.060 859.469,1887.304 882.100,1912.062 C922.390,1956.140 927.807,1959.184 954.725,1977.990 C972.702,1990.550 1001.790,2006.858 1060.558,2008.963 C1068.466,2009.247 1097.497,2007.399 1099.132,2006.728 C1101.646,2005.697 1103.532,2001.531 1103.018,1999.256 C1102.324,1996.185 1076.363,1985.347 1040.018,1950.098 Z" />
				<path fill-rule="evenodd" fill="rgb(177, 177, 190)" d="M552.000,1474.809 C476.453,1422.125 500.000,1226.000 706.000,1154.000 C912.000,1082.000 1056.813,1002.315 1127.405,982.399 C1180.024,967.554 1228.998,979.332 1266.000,1012.000 C1321.849,1061.307 1329.424,1142.438 1445.000,1140.000 C1550.753,1137.770 1550.586,1103.867 1577.000,1043.000 C1594.867,1001.828 1650.432,960.806 1700.000,961.000 C1816.793,961.457 1887.781,1048.101 2131.000,1158.000 C2310.319,1239.026 2436.053,1403.726 2334.000,1476.426 C2263.261,1526.818 1962.552,1512.197 1900.000,1548.000 C1597.814,1720.961 1653.089,1930.689 1721.000,2281.000 C1806.254,2720.773 2042.447,2715.326 2262.000,2891.000 C3007.780,3487.732 5.117,3410.751 771.000,2866.000 C983.493,2714.860 1120.570,2590.301 1192.091,2274.282 C1312.212,1743.515 1217.202,1677.665 1013.000,1559.000 C825.934,1450.293 659.356,1552.343 552.000,1474.809 Z" />
			</svg>					
		</div>

		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
			function savesvg(filename) {
				var svgXml = $('.svg-wrap').html();

				var image = new Image();
				image.src = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgXml))); //给图片对象写入base64编码的svg流

				var canvas = document.createElement('canvas'); //准备空画布
				canvas.width = $('.svg-wrap svg').width();
				canvas.height = $('.svg-wrap svg').height();
				//console.log(canvas.width)

				var context = canvas.getContext('2d'); //取得画布的2d绘图上下文
				context.drawImage(image, 0, 0);

				var a = document.createElement('a');

				a.download = "18_"+filename + ".jpg"; //设定下载名称
				a.href = canvas.toDataURL('image/jpeg'); //将画布内的信息导出为png图片数据
				a.click(); //点击触发下载
			}
			
			function rgb2hex(rgb) {
			    if (rgb.charAt(0) == '#'){
			  		return rgb;
				}
				var ds = rgb.split(/\D+/);
				var decimal = Number(ds[1]) * 65536 + Number(ds[2]) * 256 + Number(ds[3]);
				return "#" + zero_fill_hex(decimal, 6);
			}
			function zero_fill_hex(num, digits) {
				var s = num.toString(16);
				while (s.length < digits){
					s = "0" + s;
				}
				return s;
			}

			var colorSet = new Array();
			Array.from($('.svg-wrap svg path')).forEach(function(path) {
				if(colorSet.indexOf(path.getAttribute("fill")) == -1 && path.getAttribute("fill")!='none') {
					colorSet.push(path.getAttribute("fill"));
				}

			})
			console.log(colorSet)

			//console.log($('.svg-wrap svg path')[0].getAttribute("fill"))
			//$('.svg-wrap svg path')[0].style.fill='red';

			$.getJSON("json/like6.json", function(data) {
				console.log(data)
				var objKeys = Object.keys(data);
				console.log(objKeys.length)
				for(var i = 0; i < objKeys.length; i++) {
					(function(i) { //立刻执行函数
						setTimeout(function() {
							console.log(i)
							let colorbar = []
							let color = objKeys[i]
							for(let j = 0; j < 5; j += 2) {
								let colorstr = 'rgb('
								colorstr += Math.round(data[color].rgb[j][0] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][1] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][2] * 255) + ')'
								let colorstr16 = rgb2hex(colorstr)
								colorbar.push(colorstr16)
							}
							//console.log(colorbar)
							Array.from($('.svg-wrap svg path')).forEach(function(path) {
									//console.log(path.getAttribute("fill"))
									path.style.fill = colorbar[colorSet.indexOf(path.getAttribute("fill"))]
								})
							savesvg(i+1)
						}, i * 2000);
					})(i);
				}
			})
		</script>
	</body>

</html>
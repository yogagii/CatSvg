<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div class="svg-wrap">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3000px" height="3000px">
				<path fill-rule="evenodd" fill="#f4a792" d="M0.000,0.000 L3000.000,0.000 L3000.000,3000.000 L0.000,3000.000 L0.000,0.000 Z" />
				<g clip-path="url(#kittyClipPath)">
					<g id="tailFur">
						<g clip-path="url(#tailFurClipPath)">
							<path fill="#f4a792" d="M1904 1437.5h939v808.41h-939z"></path>
							<path d="M2340.2 1643.5c-54.2 28.2-61.9 116.6-36.4 173.8s96.3 99.7 162 97.2c36.4-1.4 72.1-17.3 84.2-46.7 15.9-38.6-16.8-89.6-62.9-107.8-26.5-10.5-57.5-11.5-79.3 1.4s-31.3 40.9-18.2 64c8.5 14.8 26.8 25.2 44.3 27 5.2.5 8.6-8.7 4.1-11.2-7.7-4.2-14.1-10.6-17.4-17.9a28.1 28.1 0 0 1 13-36.9c14.4-7 35.3-2.5 48.3 9.1s18.2 29 14.8 43.7c-7.2 30.9-50.4 44.7-85.6 32.2-18.6-6.6-32.2-20.7-41.9-37.3a121.6 121.6 0 0 1-12.5-91.7c6.4-25.1 20.6-55.3 51.5-74.7 58.3-36.8 203.3-54 345 73.1l-150.1-260.9" fill="#f7ebda"></path>
						</g>
					</g>
				</g>
				<g clip-path="url(#kittyClipPath)">
					<g id="bodyFur">
						<g clip-path="url(#furClipPath)">
							<path fill="#f4a792" d="M724.1 562.8h1509.4v1824.09H724.1z"></path>
							<path fill="#385877" d="M1198.3 2205.1c.9-22.6 1.7-43.6 10-71.8 3.3-11-14.7-17.9-22.6-26.4-12.8-13.9-25.7-28.7-31.3-46.8-14.7-47.7 25.4-95.1 26.8-144.9 1-38.6-24.9-76.9-61.7-88.6s-81.2 6.1-98.1 40.8c-13.4 27.3-7.2 62.5 12.8 84.8 3.7 4.1 10.3 0 8.4-5.2-4.9-12.9-6.5-26.9-3.6-40.3 4.4-20.8 20.7-39.3 41.5-43.7s44.6 7.8 50.9 28-4 40.8-16.3 57.4-27.1 32.3-32.5 52.2c-6 22.3 1.2 45.7 5.5 68.4s5.1 48.9-10.6 65.9c-6.3 6.8-14.7 11.5-20.3 19-20 27-7.4 64.4-6.4 98.1 1.9 60.6-47.9 41.3-60.1 63-10.4 18.5 2.8 28.7 19.4 41.9s36.8 10.3 58.1 10.3c30.4 0 55.5 4.4 81.2-12s30.7-46.1 35.3-76.2"></path>
							<circle cx="1084.8" cy="1910.7" r="23.7" fill="#f7ebda"></circle>
							<path fill="#385877" d="M1041.3 2055.2c-6.7-18.8-1.1-37.6 6.4-55.2a3.1 3.1 0 0 1 5.8.7c2.3 12.7 9.2 26.2 11.7 32.6 7.5 19.3 10.7 39 6 58.9a3 3 0 0 1-5.6.5c-5.8-12.6-19.3-23.9-24.3-37.5zM1704 2205.1c-10.7-8.7-1.8-43.6-10.1-71.8-3.3-11 14.8-17.9 22.6-26.4 12.9-13.9 25.8-28.7 31.3-46.8 14.7-47.7-25.4-95.1-26.7-144.9-1-38.6 24.9-76.9 61.7-88.6s81.1 6.1 98.1 40.8c13.4 27.3 7.2 62.5-12.8 84.8-3.7 4.1-10.3 0-8.4-5.2 4.8-12.9 6.5-26.9 3.6-40.3-4.5-20.8-20.7-39.3-41.5-43.7s-44.6 7.8-50.9 28 4 40.8 16.2 57.4 27.2 32.3 32.5 52.2c6 22.3-1.1 45.7-5.5 68.4s-5 48.9 10.6 65.9c6.3 6.8 14.8 11.5 20.3 19 20.1 27-9.5 68.5 6.5 98.1 4.1 7.6-4.9 26 2.4 31 13.6 9.1 45.3 3.3 53.2 17.4 10.3 18.5 1.6 43.3-15 56.5s-38.9 16.9-60.1 16.9c-30.5 0-61.4-6.9-87-23.3s-30.3-43.3-34.8-73.5"></path>
							<circle cx="1820.2" cy="1913" r="23.8" fill="#f7ebda"></circle>
							<path fill="#385877" d="M1867.9 2064.2c6.8-18.8 1.2-37.6-6.4-55.2a3 3 0 0 0-5.7.7c-2.4 12.7-9.3 26.2-11.7 32.6-7.5 19.3-10.8 39-6.1 58.9a3 3 0 0 0 5.7.5c5.8-12.6 19.3-23.9 24.2-37.5z"></path>
							<path fill="#f7ebda" d="M1922.3 2255.8c-2.3 7.4 11.8 9.6 19.3 11.3a605.2 605.2 0 0 0 243.5 4.3c26.6-5 57-15.4 65.6-41.1 5.2-15.7.3-33.5-9.3-47s-23.5-23.3-37.6-32.1c-36.7-22.8-121.4-58.6-165.3-43-23 8.3-36.4 51.5-60.1 81.2-20.2 25.4-49.1 44.2-56.1 66.4zM931.3 2117.4c17.3 58.5 45.2 89.5 97.9 120.4 5.4 3.2 3.6 14.1-.7 15.2l-76.4 20.7c-41.2 11.1-82.9 22.3-125.5 22.4s-87-12.3-117.2-42.4c-23.2-23.1-36.1-60.8-19.4-88.9 8.8-14.8 24-24.4 39.4-32 32.6-16.2 68.5 1.8 104.9-.7M1282.8 841c-42 38.1-35.3 94 15.2 127.9s139.8 42.4 204.4 19.6c35.8-12.7 64.6-35.8 63.9-61.3-1-33.5-55.9-60.5-110-59.2-31 .8-62.5 10-78.7 26.4s-13.5 40.1 9.7 52.8c15 8.2 37.8 10 56.1 5.7 5.4-1.3 4.8-9.2-.7-9.6-9.5-.6-18.7-3.2-25.2-7.6-12.4-8.3-13.8-22.1-3.1-31.3s34.1-13.2 52.3-8.8 30.8 15.5 33.8 27.5c6.2 25-30.9 49-71.6 51s-80-14-101.2-35.6-22.3-48.3 4.3-69.2c19-14.8 54.8-25.5 84.1-28.3"></path>
							<path fill="#f7ebda" d="M1250.2 848.1l26.5-15.1 16.5 30.8s70.6-18.8 144.1-23.3c21.2-1.3 41.5-3.5 65.1-4.2 40.3-1 80.3 5.9 114.8 26.7l-4.4-52.2 8-132.7-132-107.3h-116l-91.3 15.3-60.7 78.7-44.6 81.3 20.6 49z"></path>
							<path fill="#385877" d="M1603.3 850.4l50.9 36.4 49.3 52.7 49.3 76.6 38.9 63.3c5.2-8.1 1193.7-742.5 1192.5-747.9-2-8.7 0-319.9 0-319.9H1959.8zM1222.2 859.5L818 11.6H18.2v903.2l1046 176.5 38.8-90 28.2-56.9 24.8-29.6 38.3-35.3 27.9-20z"></path>
						</g>
					</g>
				</g>
			</svg>					
		</div>

		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
			function savesvg(filename) {
				var svgXml = $('.svg-wrap').html();

				var image = new Image();
				image.src = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgXml))); //给图片对象写入base64编码的svg流

				var canvas = document.createElement('canvas'); //准备空画布
				canvas.width = $('.svg-wrap svg').width();
				canvas.height = $('.svg-wrap svg').height();
				//console.log(canvas.width)

				var context = canvas.getContext('2d'); //取得画布的2d绘图上下文
				context.drawImage(image, 0, 0);

				var a = document.createElement('a');

				a.download = "16_"+filename + ".jpg"; //设定下载名称
				a.href = canvas.toDataURL('image/jpeg'); //将画布内的信息导出为png图片数据
				a.click(); //点击触发下载
			}
			
			function rgb2hex(rgb) {
			    if (rgb.charAt(0) == '#'){
			  		return rgb;
				}
				var ds = rgb.split(/\D+/);
				var decimal = Number(ds[1]) * 65536 + Number(ds[2]) * 256 + Number(ds[3]);
				return "#" + zero_fill_hex(decimal, 6);
			}
			function zero_fill_hex(num, digits) {
				var s = num.toString(16);
				while (s.length < digits){
					s = "0" + s;
				}
				return s;
			}

			var colorSet = new Array();
			Array.from($('.svg-wrap svg path')).forEach(function(path) {
				if(colorSet.indexOf(path.getAttribute("fill")) == -1 && path.getAttribute("fill")!='none') {
					colorSet.push(path.getAttribute("fill"));
				}

			})
			console.log(colorSet)

			//console.log($('.svg-wrap svg path')[0].getAttribute("fill"))
			//$('.svg-wrap svg path')[0].style.fill='red';

			$.getJSON("json/like6.json", function(data) {
				console.log(data)
				var objKeys = Object.keys(data);
				console.log(objKeys.length)
				for(var i = 0; i < objKeys.length; i++) {
					(function(i) { //立刻执行函数
						setTimeout(function() {
							console.log(i)
							let colorbar = []
							let color = objKeys[i]
							for(let j = 0; j < 5; j += 2) {
								let colorstr = 'rgb('
								colorstr += Math.round(data[color].rgb[j][0] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][1] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][2] * 255) + ')'
								let colorstr16 = rgb2hex(colorstr)
								colorbar.push(colorstr16)
							}
							//console.log(colorbar)
							Array.from($('.svg-wrap svg path')).forEach(function(path) {
									//console.log(path.getAttribute("fill"))
									path.style.fill = colorbar[colorSet.indexOf(path.getAttribute("fill"))]
								})
							Array.from($('.svg-wrap svg circle')).forEach(function(path) {
									//console.log(path.getAttribute("fill"))
									path.style.fill = colorbar[colorSet.indexOf(path.getAttribute("fill"))]
								})
							savesvg(i+1)
						}, i * 2000);
					})(i);
				}
			})
		</script>
	</body>

</html>
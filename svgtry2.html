<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div class="svg-wrap">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3000px" height="3000px">
				<path fill-rule="evenodd" fill="#f7bc56" d="M0.000,0.000 L3000.000,0.000 L3000.000,3000.000 L0.000,3000.000 L0.000,0.000 Z" />
				<g id="tailFur">
					<g clip-path="url(#tailFurClipPath)">
						<path fill="#f7bc56" d="M1904 1331h1014.2v914.97H1904z" />
						<path d="M2328.6 1866.9c17.6 106.8 62.1 214.8 154.2 257.6s228.8 19.3 312.5-40.4c-62.1 57.3-131.1 108.9-209.6 133s-168.1 17.9-234.8-33c-42.1-32.2-73-80.6-87.7-134.2s-13.4-111.7 1.8-165.1" fill="#44e192" />
						<path d="M2424.2 1883.4c31.6 82.9 103.2 149.8 188.4 174.6 58.7 17.1 124.8 13.9 177.4-17.2s88.4-92.5 81-153.1c-43.8 54.8-116.7 84.9-186.4 76.8s-135.1-74.5-165.1-137.9m-351.8 82.1c-13.2 56-12 115.8 6.4 170.3s54.2 103.5 102.3 135.2c44.1 29.1 96.3 42.9 147.5 56.2-47.2 9.8-95.3 14.8-143.5 16.3-61.4 2-124.6-2-180.8-26.8a260.9 260.9 0 0 1-131.8-131.7c-14.8-33.5-22.4-70.9-17.2-107.1s24.1-71.3 54.2-92.1 71.9-25.6 104.2-8.4" fill="#44e192" />
						<path d="M2697.6 1885.1a266.6 266.6 0 0 0 186.8-21.8l3.5-66.5c-49.8 8.8-100.5 17.4-150.7 11.4-26.2-3.1-52.1-10.6-75.3-23.1a162.2 162.2 0 0 1-32.5-22.8c-8.6-7.9-16.1-23.1-26.6-22.7-19.7.8-38.9 30-38.6 47.7.4 25.7 26.4 43.5 45.1 56.9a264.6 264.6 0 0 0 88.3 40.9z" fill="#44e192" />
						<path d="M2282.7 1557.4s-19.9 27.2-35.1 47.6c-47.1 63-78 149.5-54.1 228.9 19.3 64.1 114.8 123.2 174.2 153q9.4 1.1 19.1 1.5a5 5 0 0 0-.4-1.4c-9.7-21.4 6.3-60.3 19-78 15.9-22.3 42.2-34.2 66.2-47.4s48.6-30.9 55.7-57.3l-5 57.7c37.9-18.6 69.3-49.7 89.3-86.9a198.4 198.4 0 0 0 18.5-49.1c40.1-206.5-93.4-335.5-218.9-323.7-22.2 2.1-136.4 50.9-155.7 58.6s-84.8 161.8-100.7 174.2c12.3-5.5 127.9-77.7 127.9-77.7z" fill="#f7bc56" />
						<g clip-path="url(#b)" fill="#44e192">
							<path d="M2173.1 1686.3c27.9-42 77.8-68.5 128.2-68.3 19.8.1 43.3 7.3 48.4 26.4 2.8 10.5-1 21.8-7.6 30.4s-15.8 14.8-24.9 20.6a591 591 0 0 1-180.4 76.4m132.7 171.6a124 124 0 0 1 5.6-162.2c7.6-8.2 19.4-15.7 29.2-10.3 6.5 3.6 9 11.6 10.5 18.9 7.6 36.7 4.6 74.6 6.3 112s9.2 76.6 33.8 104.9m72-84.3c6-30.8-1.7-62.7-12.7-92.1s-25.2-57.7-32.9-88.2c-2.8-11-3.8-24.7 5.2-31.6 6.3-4.8 15.1-4.2 22.7-2.4 39.5 9.2 69.4 44.2 82.2 82.7s11 80.4 5.9 120.6m130.1-113c2-58-7.9-117-34-168.7s-69.1-95.9-122.5-118.4c-12.2-5.2-25.2-9.2-38.5-9.2s-27 4.4-36.1 14.1c-12.9 13.8-13.8 35.8-6.1 53.1s22.7 30.2 38.6 40.3 33.3 17.8 49.2 27.9c48.2 30.6 81.3 84 87.2 140.9 2.2 20.9.9 42.4 6.6 62.7s20.8 40 41.7 42.5" />
						</g>
						<ellipse cx="2659.7" cy="1469.9" rx="78.8" ry="174.6" transform="rotate(-62 2659 1469.935)" fill="#44e192" />
						<path d="M2198.6 1528.2a156.8 156.8 0 0 1 100.3-27.2c16.5 1.3 32.8 5.2 49.3 6.4s34-.6 47.9-9.6 23-26.8 18.1-42.6-20.3-24.3-35.3-29.9a192.3 192.3 0 0 0-120.9-4.7m323.9 204c34 20.1 74.4 25.8 113.7 29.6 32.6 3.1 65.7 5.1 97.8-1.5s63.3-22.9 81.8-49.8a472.3 472.3 0 0 1 32.2 105.1c-24.6 21.8-57.2 33-89.8 37.2s-65.7 1.9-98.5-.5c-27.1-1.9-54.4-3.9-80.8-10.6s-52-18.4-71.3-37.6" fill="#44e192" />
					</g>
				</g>
				<g id="bodyFur">
					<g clip-path="url(#furClipPath)">
						<path fill="#f7bc56" d="M724.1 562.8h1509.4v1824.09H724.1z" />
						<path fill="#f9cfad" d="M1156.9 2405.5l122.6-618.4a177.2 177.2 0 0 1 170.7-142.7 177.2 177.2 0 0 1 177.6 145.6l107.5 593.7z" />
						<path fill="#44e192" d="M1176.2 898l71.3 43.4c85 51.8 74.8-2.2 67.9-27.7s-44-81.1-44-81.1l-57.7 31.2zm140.3-139.1a939.1 939.1 0 0 1 38.9 141.1c8.5 44 24.4 89.6 54.3 90.6 58 1.9 44.4-191.1 44.4-191.1s-3.6-175.3-35.6-201.3c-18.9-15.3-13.4-35-57-16-30.3 13.1-39.5 101.6-49.6 122.1-6.7 13.5-2.7 34.4 4.6 54.6zm231.9 72.7s-57 137.1-19.3 154.3 121.3-112.3 121.3-112.3zM917.1 1525s62.6 13.5 96.5 20.3c17.6 16.2 35.1 29.5 51 37 45.7 23 50.5 64.3 29.9 86.1-25.9 27.4-102.7-1.4-127.5-17.6s-114.7-86.4-114.7-86.4z" />
						<path fill="#44e192" d="M804.4 1506.1S954 1728.5 1057 1776.9c63.8 32 70.5 89.8 41.7 120.1-36.2 38.3-143.4-1.9-178-24.6s-160.1-120.6-160.1-120.6zm1213.1-66s-70.9 47.2-115.6 119.5c-15.4 25-31.8 46.7-48.1 59.9-38.9 33.3-33.6 74.6-8.3 90.7 31.8 20.4 99.4-26 119.6-47.7s90.5-111.5 90.5-111.5zm87.9 129.2s-131.3 187.9-228 247.7c-59.7 39.1-59.8 97.3-27.7 124.1 40.3 33.9 142.2-18.3 174-44.8s145.2-138.1 145.2-138.1zm104.9 164.3s-162.4 230.5-270.8 283.9c-28.8 15.1-38.4 43.6-46.6 63.9-10.9 27.1-5.2 54.9 12.5 73s55.4 18.8 92 10.3c0 0 16.7-35.6 24.7-56.1 16-40.9 239.3-114.8 239.3-114.8zM854.2 1913.5c38.1-25.8 102.3 19.3 120.7 52.7 13.6 24.7 11.3 42 43.3 86.7 22.8 31.9 28.1 78.2 22 89.3-12.9 23.7-118.6-6.2-162-63.3-31.3-41.3-67.2-136.2-24-165.4z" />
					</g>
				</g>
			</svg>
		</div>

		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
			function savesvg(filename) {
				var svgXml = $('.svg-wrap').html();

				var image = new Image();
				image.src = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgXml))); //给图片对象写入base64编码的svg流

				var canvas = document.createElement('canvas'); //准备空画布
				canvas.width = $('.svg-wrap svg').width();
				canvas.height = $('.svg-wrap svg').height();
				//console.log(canvas.width)

				var context = canvas.getContext('2d'); //取得画布的2d绘图上下文
				context.drawImage(image, 0, 0);

				var a = document.createElement('a');

				a.download = "4_"+filename + ".jpg"; //设定下载名称
				//a.href = canvas.toDataURL('image/png'); //将画布内的信息导出为png图片数据
				a.href = canvas.toDataURL('image/jpeg'); //将画布内的信息导出为png图片数据
				a.click(); //点击触发下载
			}
			
			function rgb2hex(rgb) {
			    if (rgb.charAt(0) == '#'){
			  		return rgb;
				}
				var ds = rgb.split(/\D+/);
				var decimal = Number(ds[1]) * 65536 + Number(ds[2]) * 256 + Number(ds[3]);
				return "#" + zero_fill_hex(decimal, 6);
			}
			function zero_fill_hex(num, digits) {
				var s = num.toString(16);
				while (s.length < digits){
					s = "0" + s;
				}
				return s;
			}

			var colorSet = new Array();
			Array.from($('.svg-wrap svg path')).forEach(function(path) {
				if(colorSet.indexOf(path.getAttribute("fill")) == -1 && path.getAttribute("fill")!='none') {
					colorSet.push(path.getAttribute("fill"));
				}

			})
			console.log(colorSet)

			//console.log($('.svg-wrap svg path')[0].getAttribute("fill"))
			//$('.svg-wrap svg path')[0].style.fill='red';

			$.getJSON("json/like6.json", function(data) {
				console.log(data)
				var objKeys = Object.keys(data);
				console.log(objKeys.length)
				for(var i = 0; i < objKeys.length; i++) {
					(function(i) { //立刻执行函数
						setTimeout(function() {
							console.log(i)
							let colorbar = []
							let color = objKeys[i]
							for(let j = 0; j < 5; j += 2) {
								let colorstr = 'rgb('
								colorstr += Math.round(data[color].rgb[j][0] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][1] * 255) + ','
								colorstr += Math.round(data[color].rgb[j][2] * 255) + ')'
								let colorstr16 = rgb2hex(colorstr)
								colorbar.push(colorstr16)
							}
							//console.log(colorbar)
							Array.from($('.svg-wrap svg path')).forEach(function(path) {
									//console.log(path.getAttribute("fill"))
									path.style.fill = colorbar[colorSet.indexOf(path.getAttribute("fill"))]
								})
								//console.log("-----------------------")
								//ii++
							savesvg(i+1)
						}, i * 2000);
					})(i);
				}
			})
		</script>
	</body>

</html>